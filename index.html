<!DOCTYPE html>
<html lang="ta">

<head>
    <meta charset="UTF-8">
    <title>‡Æ∏‡Øç‡Æ∞‡ØÄ‡Æ™‡Æö‡Øç‡Æö‡Øà ‡ÆÖ‡ÆÆ‡Øç‡ÆÆ‡Æ©‡Øç ‡Æ™‡Øã‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ≤‡Øç</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        /* FULL PAGE FLEX */
        body {
            margin: 0;
            background: #f4f6f8;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
        }

        /* DOCUMENT */
        #invoice {
            width: 100%;
            max-width: 900px;
            background: white;
            display: flex;
            flex-direction: column;
        }

        /* FULL WIDTH POSTER */
        .poster-container {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .poster img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .content {
            position: relative;
            padding: 3px 30px 40px 30px;
            /* extra bottom padding */
            overflow: hidden;
        }


        /* WATERMARK FULL COVER */
        .content::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("./vehicle.png");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 100% 100%;
            opacity: 0.08;
            filter: blur(3px);
            z-index: 0;
        }

        .content>* {
            position: relative;
            z-index: 1;
        }

        /* HEADER */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        /* SECTIONS */
        .section {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .section-title {
            font-size: 18px;
            border-bottom: 2px solid #2d6bdfc6;
            padding-bottom: 4px;
            margin-bottom: 10px;
            width: 100%;
        }

        /* TABLES */
        table {
            border-collapse: collapse;
            width: 100%;
            table-layout: fixed;
        }

        td {
            padding: 8px 10px;
            vertical-align: middle;
        }

        /* DRILLING */
        .drilling td:nth-child(1),
        .drilling td:nth-child(3) {
            width: 40%;
        }

        .drilling td:nth-child(2),
        .drilling td:nth-child(4) {
            width: 30%;
        }

        /* FOUR COLUMN */
        .four-column td:nth-child(1),
        .four-column td:nth-child(3) {
            width: 40%;
            font-weight: bold;
        }

        .four-column td:nth-child(2),
        .four-column td:nth-child(4) {
            width: 25%;
        }

        /* PRICE BOX */
        .price-box {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 6px;
        }

        input {
            width: 120px;
            padding: 6px;
            text-align: right;
            vertical-align: center;
        }

        /* BUTTONS */
        /* ACTION BUTTONS */
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 26px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: #2d6cdf;
            /* COMMON COLOR */
            color: #fff;
            transition: all 0.2s ease;
        }

        /* Hover effect ONLY */
        .action-btn:hover {
            background: #1f54b5;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        /* Optional active feedback */
        .action-btn:active {
            transform: translateY(0);
            box-shadow: none;
        }

        /* BUTTON-LIKE TOGGLE */
        .checkbox-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 26px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            border: 2px solid #2d6cdf;
            background: #2d6cdf;
            color: #2d6cdf;
            transition: all 0.2s ease;
            color: #fff;
        }

        /* Hide native checkbox */
        .checkbox-btn input {
            display: none;
        }

        /* Custom check icon */
        .checkbox-btn .checkmark {
            display: none;
            font-size: 16px;
        }

        /* Hover */
        .checkbox-btn:hover {
            background: #1f54b5;
        }

        /* ACTIVE STATE (Checked) */
        .checkbox-btn input:checked~.checkmark {
            display: inline;
        }

        .checkbox-btn input:checked~.text {
            color: #fff;
        }

        .checkbox-btn:has(input:checked) {
            background: #2d6cdf;
            color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .hide {
            display: none !important;
        }

        /* Add this to your <style> */
        @media print {
            .buttons {
                display: none !important;
            }

            .header h2 {
                display: none !important;
            }

            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }

    </style>
</head>

<body>

    <div id="invoice">

        <div class="poster-container" id="headerSection">
            <div class="poster">
                <img src="./header.png">
            </div>
        </div>

        <div class="content">

            <div class="header">
                <h2>‡Æ™‡Øã‡Æ∞‡Øç‡Æµ‡ØÜ‡Æ≤‡Øç ‡Æï‡Æü‡Øç‡Æü‡Æ£ ‡Æµ‡Æø‡Æµ‡Æ∞‡ÆÆ‡Øç</h2>
                <table id="customerInfo">
                    <tr>
                        <td style="width:50%;font-weight:bold">
                            ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç :
                            <input type="text" style="width:70%;text-align:left">
                        </td>
                        <td style="width:50%;font-weight:bold">
                            ‡ÆÆ‡Øä‡Æ™‡Øà‡Æ≤‡Øç :
                            <input type="tel" style="width:60%;text-align:left">
                        </td>
                    </tr>
                </table>
            </div>

            <!-- DRILLING -->
            <div class="section">
                <div class="section-title">‡Æü‡Æø‡Æ∞‡Æø‡Æ≤‡Øç‡Æ≤‡Æø‡Æô‡Øç ‡Æï‡Æü‡Øç‡Æü‡Æ£‡ÆÆ‡Øç 1 ‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡ØÅ</div>

                <table class="drilling">
                    <tr style="font-weight:bold;text-align:center">
                        <td>‡ÆÖ‡Æü‡Æø</td>
                        <td>6.5 ‡Æá‡Æ©‡Øç‡Æö‡Øç</td>
                        <td>8 ‡Æá‡Æ©‡Øç‡Æö‡Øç</td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>001 ‚Äì 300 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price300_65"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price300_8"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>301 ‚Äì 400 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price400_65"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price400_8"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>401 ‚Äì 500 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price500_65"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0" id="price500_8"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>501 ‚Äì 600 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price600_65" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price600_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>601 ‚Äì 700 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price700_65" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price700_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>701 ‚Äì 800 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price800_65" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price800_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>801 ‚Äì 900 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price900_65" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price900_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>901 ‚Äì 1000 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1000_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1000_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>1001 ‚Äì 1100 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1100_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1100_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>1101 ‚Äì 1200 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1200_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1200_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>1201 ‚Äì 1300 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1300_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1300_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>1301 ‚Äì 1400 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1400_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1400_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>

                    <tr>
                        <td>1401 ‚Äì 1500 ‡ÆÖ‡Æü‡Æø</td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1500_65" type="number" min="0"
                                    value="0" oninput="calculateTotals()"></div>
                        </td>
                        <td>
                            <div class="price-box"><span>‚Çπ</span><input id="price1500_8" type="number" min="0" value="0"
                                    oninput="calculateTotals()"></div>
                        </td>
                        <td></td>
                    </tr>
                    <tr style="font-weight:bold;background:#2d6bdfed;color:#fff">
                        <td>‡Æü‡Æø‡Æ∞‡Æø‡Æ≤‡Øç‡Æ≤‡Æø‡Æô‡Øç ‡Æï‡Æü‡Øç‡Æü‡Æ£‡ÆÆ‡Øç ‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç</td>
                        <td>
                            <div class="price-box">‚Çπ <span id="total_65">0</span></div>
                        </td>
                        <td>
                            <div class="price-box">‚Çπ <span id="total_8">0</span></div>
                        </td>
                        <td></td>
                    </tr>
                </table>
            </div>

            <!-- CASING -->
            <div class="section">
                <div class="section-title">‡Æï‡Øá‡Æö‡Æø‡Æô‡Øç ‡Æ™‡Øà‡Æ™‡Øç 1 ‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡ØÅ</div>

                <table class="four-column">
                    <tr>
                        <td>PVC 7 ‡Æá‡Æ©‡Øç‡Æö‡Øç</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0"></div>
                        </td>
                        <td style="text-align:center">PVC 10 ‡Æá‡Æ©‡Øç‡Æö‡Øç</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0"></div>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- OTHER -->
            <div class="section">
                <div class="section-title">‡ÆÆ‡Æ±‡Øç‡Æ± ‡Æï‡Æü‡Øç‡Æü‡Æ£‡ÆÆ‡Øç</div>

                <table class="four-column">
                    <tr>
                        <td>‡ÆÉ‡Æ™‡Æø‡Æ≥‡Æ∑‡Æø‡Æô‡Øç 1 ‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡ØÅ</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0"></div>
                        </td>
                        <td style="text-align:center">‡Æ≤‡Øá‡Æ™‡Æ∞‡Øç ‡Æ™‡Øá‡Æü‡Øç‡Æü‡Ææ</td>
                        <td>
                            <div class="price-box">‚Çπ <input type="number" min="0" value="0"></div>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="buttons" id="actions">
                <label class="checkbox-btn">
                    <input type="checkbox" id="excludeHeader">
                    <span class="checkmark">‚úî</span>
                    <span class="text">Exclude Logo</span>
                </label>

                <button class="action-btn" onclick="downloadImage()">
                    üñº Image
                </button>

                <button class="action-btn" onclick="generatePDF()">
                    üìÑ PDF
                </button>
                <button class="action-btn" onclick="window.print()">
                    üñ® Print
                </button>
            </div>
        </div>
    </div>

    <script>
        function hideButtons(h) {
            document.getElementById("actions").classList.toggle("hide", h);
        }

        async function generatePDF() {
            const pdf = new jspdf.jsPDF("p", "mm", "a4");
            const pageWidth = pdf.internal.pageSize.getWidth();
            const pageHeight = pdf.internal.pageSize.getHeight();

            hideButtons(true);

            const invoice = document.getElementById("invoice");
            const headerSection = document.getElementById("headerSection");

            // Exclude logo if checked
            headerSection.style.display =
                document.getElementById("excludeHeader").checked ? "none" : "flex";

            const canvas = await html2canvas(invoice, {
                scale: 2,
                useCORS: true
            });

            const imgData = canvas.toDataURL("image/png");

            const imgWidth = canvas.width;
            const imgHeight = canvas.height;

            const ratio = Math.min(
                pageWidth / imgWidth,
                pageHeight / imgHeight
            );

            const width = imgWidth * ratio;
            const height = imgHeight * ratio;

            const x = (pageWidth - width) / 2;
            const y = (pageHeight - height) / 2;

            // ‚úÖ SINGLE PAGE ONLY
            pdf.addImage(imgData, "PNG", x, y, width, height, undefined, "FAST");

            pdf.save("borwell.pdf");

            headerSection.style.display = "flex";
            hideButtons(false);
        }



        function downloadImage() {
            hideButtons(true);
            html2canvas(document.getElementById("invoice"), { scale: 2 }).then(c => {
                const a = document.createElement("a");
                a.download = "borwell.png";
                a.href = c.toDataURL();
                a.click();
                hideButtons(false);
            });
        }

        function calculateTotals() {
            let total65 = 0;
            let total8 = 0;

            // First slab: 001‚Äì300 (300 feet)
            total65 += (parseFloat(document.getElementById("price300_65").value) || 0) * 300;
            total8 += (parseFloat(document.getElementById("price300_8").value) || 0) * 300;

            // Remaining slabs: each 100 feet
            const slabs = [
                400, 500, 600, 700, 800,
                900, 1000, 1100, 1200,
                1300, 1400, 1500
            ];

            slabs.forEach(slab => {
                total65 += (parseFloat(document.getElementById(`price${slab}_65`).value) || 0) * 100;
                total8 += (parseFloat(document.getElementById(`price${slab}_8`).value) || 0) * 100;
            });

            document.getElementById("total_65").innerText = total65.toFixed(2);
            document.getElementById("total_8").innerText = total8.toFixed(2);
        }

        function hideButtons(h) {
            const actions = document.getElementById("actions");
            actions.classList.toggle("hide", h);

            const headerSection = document.getElementById("headerSection");
            const hideHeader = document.getElementById("excludeHeader").checked;

            headerSection.classList.toggle("hide", h && hideHeader);
        }


    </script>

</body>

</html>
